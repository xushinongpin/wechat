①每个用户针对每个公众号会产生一个安全的OpenID



②在多公众号、移动应用之间做用户共通，则需前往微信开放平台 【 [https://open.weixin.qq.com/](https://open.weixin.qq.com/) 】，将这些公众号和应用绑定到一个开放平台账号下，绑定后，一个用户虽然对多个公众号和应用有多个不同的OpenID，但他对所有这些同一开放平台账号下的公众号和应用，只有一个UnionID，可以在用户管理-获取用户基本信息（UnionID机制）文档了解详情。

1、引导用户进入授权页面同意授权，获取code

2、通过code换取网页授权access\_token（与基础支持中的access\_token不同）

3、如果需要，开发者可以刷新网页授权access\_token，避免过期

4、通过网页授权access\_token和openid获取用户基本信息（支持UnionID机制）



③每个接口都有每日接口调用频次限制，可以在公众平台官网-开发者中心处查看具体频次。

④公众平台接口调用仅支持80端口。

⑤被动回复消息：公众号可以在5秒内做出回复

⑥客服消息：在用户给公众号发消息后的48小时内，公众号可以给用户发送不限数量的消息，主要用于客服场景。

⑦模板消息：在需要对用户发送服务通知（如刷卡提醒、服务预约成功通知等）时，公众号可以用特定内容模板，主动向用户发送消息。

⑧网页授权获取用户基本信息：通过该接口，可以获取用户的基本信息（获取用户的OpenID是无需用户同意的，获取用户的基本信息则需用户同意）

⑨微信JS-SDK：是开发者在网页上通过JavaScript代码使用微信原生功能的工具包，开发者可以使用它在网页上录制和播放微信语音、监听微信分享、上传手机本地图片、拍照等许多能力。

⑩AccessToken中控服务器：负责： 提供主动刷新和被动刷新机制来刷新accessToken并存储（为了防止并发刷新，注意加并发锁），提供给业务逻辑有效的accessToken。

⑪收到粉丝消息后不想或者不能5秒内回复时，需回复“success”字符串

⑫[ 在线测试的平台](http://mp.weixin.qq.com/debug/)

⑬重新关注公众号后即可看到新创建菜单界面，题外话，如果不重新关注，公众号界面也会自动更改，但又时间延迟。

⑭

关于反馈问题

是程序肯定有bug，所以在使用开放平台过程中，肯定会遇见各种各样的问题，可能是自己的坑，也可能是微信团队的锅。当自己查自己代码千千遍，依旧没有发现问题时候，可以通过腾讯客服等等渠道，请求微信团队的帮助。如何高效快速的得到帮助呢？下面强调三个要点：

1）简明扼要的描述清楚场景以及遇见问题，描述过程中尽可能使用wiki上的名称，譬如自定义菜单，素材管理等专有名词，不然开发根本不知道你在说什么。

2）提供账号信息：AppID（登陆公众平台官网-&gt;基本配置），若牵扯粉丝提供粉丝的OpenID。

3）提供bug的发生时间，至少要以小时为单位（年-月-日-小时），当然越具体越容易查明问题。

⑮

开发者可以根据自己的服务器部署情况，选择最佳的接入点（延时更低，稳定性更高）。除此之外，可以将其他接入点用作容灾用途，当网络链路发生故障时，可以考虑选择备用接入点来接入。

1. 通用域名\(api.weixin.qq.com\)，使用该域名将访问官方指定就近的接入点；

2. 上海域名\(sh.api.weixin.qq.com\)，使用该域名将访问上海的接入点；

3. 深圳域名\(sz.api.weixin.qq.com\)，使用该域名将访问深圳的接入点；

4. 香港域名\(hk.api.weixin.qq.com\)，使用该域名将访问香港的接入点。

⑯

```
access\_token  ---  512个字符空间

有效期通过返回的expire\_in来传达，目前是7200秒之内的值

**调用接口时，请登录“微信公众平台-开发-基本配置”提前将服务器IP地址添加到IP白名单中，点击查看设置方法，否则将无法调用成功**
```

```
    https://api.weixin.qq.com/cgi-bin/token?grant_type=client_credential&appid=APPID&secret=APPSECRET
    参数    是否必须     说明
    grant_type    是            获取access_token填写client_credential
    appid    是            第三方用户唯一凭证
    secret    是            第三方用户唯一凭证密钥，即appsecret

    微信会返回下述JSON数据包给公众号 {"access_token":"ACCESS_TOKEN","expires_in":7200}
    参数    说明
access_token    获取到的凭证
expires_in    凭证有效时间，单位：秒

    错误时微信会返回错误码等信息{"errcode":40013,"errmsg":"invalid appid"}
    返回码    说明
        -1    系统繁忙，此时请开发者稍候再试
        0    请求成功
        40001    AppSecret错误或者AppSecret不属于这个公众号，请开发者确认AppSecret的正确性
        40002    请确保grant_type字段值为client_credential
        40164    调用接口的IP地址不在白名单中，请在接口IP白名单中进行设置。（小程序及小游戏调用不要求IP地址在白名单内。）
```

⑰[进入微信公众帐号测试号申请系统](https://mp.weixin.qq.com/debug/cgi-bin/sandbox?t=sandbox/login)

⑱接口报警： 当微信服务器向开发者推送消息失败次数达到预定阈值时，会将报警消息发送到指定微信报警群中（设置方式：公众平台-&gt;开发-运维中心-&gt;接口报警）

⑲⑳

